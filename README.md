# 會打的小孩有糖吃 Whac-A-Mole-vending-machine
小時候，貪吃又愛玩，喜歡邊吃糖果邊玩遊戲機，長大之後，課業壓力大，需要輕鬆的小遊戲抒壓，也需要吃甜食補充能量、得到快樂，我們結合打地鼠遊戲機和迷你糖果機的設計，讓使用者在舒緩壓力、放鬆心情的同時，還能懷念童年時光！
## 系統功能與原理
![圖片參考名稱](https://ppt.cc/f14XOx@.png)  
1. 玩家透過搖桿按鈕開始（或重啟）遊戲。遊戲開始十五秒內會在點矩陣上顯示上、下、左、右等四個方向的地鼠，接著玩家需操作搖桿，打擊對應四個方向的地鼠。點矩陣及搖桿分別是視覺暫留及ADC實作。  
2. 點矩陣上方的七段顯示器，分別可顯示出當前的時間及分數。遊戲結束後，未滿10分將顯示FAIL,超過10分則透過return進入獎勵階段。  
3. 當打地鼠遊戲回傳勝利後，透過輪流輸出1或2或4到LATD製造出三顆LED燈閃爍的效果(供玩家選糖)，當接收到按鈕訊號為1時(pull-down resistor)，LED燈停止閃爍，並回傳LATD/2的值(0或1或2號燈)。
4. 此時相對應的步進馬達會開始旋轉。步進馬達的原理是透過四個方向的線圈輪流通電，吸引馬達中心的磁鐵，驅使馬達轉動。步進馬達有三種旋轉方式：一相激磁、二相激磁、一/二相激磁 ，其差別在於每次通電的線圈數。此專案使用二相激磁的方式，因為考量到要承載餅乾及衣架螺旋的重量，需要比較大的轉速。  
5. 兩個糖果軌道下都有紅外線感測器，當偵測到掉落的糖果，紅外線感測器輸出變為0，回傳馬達後，馬達停止旋轉，並重啟遊戲。
## 系統架構圖
![架構圖](https://ppt.cc/fGnF0x@.png)
## 系統開發工具、材料及技術
### 開發工具
MPLAB XC8
### 材料
* PIC18F4520晶片*1
* 麵包板*2
* 四位數七段顯示器*1
* 8*'8LED點矩陣*1
* 紅外線避障器*2
* 5V步進馬達*3
* 馬達驅動版*3
* 按鈕*1
* 搖桿*1
* LED燈*3
* 杜邦線若干條
* 220Ω 100Ω電阻若干條
### 技術
* 四位數七段顯示器(Timer)
* 搖桿及其按鈕(ADC)
* 8*8點矩陣(視覺暫留動畫）
* 紅外線避障器距離感知
* 步進馬達轉速調整
* 於扭力不足之馬達上實現可運行之旋轉機關
